<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WAFA SALAF</title>
    <link rel="stylesheet" href="styles/style.css" />
  </head>
  <body>
    <button type="button" class="prev-step">⬅️ Retour</button>
    <div class="steps">
      <div class="step" id="step-0">
        <span class="step-number">1</span>
        <span class="step-title">Simuler mon crédit</span>
      </div>
      <div class="step" id="step-1">
        <span class="step-number">2</span>
        <span class="step-title">Mes coordonnées</span>
      </div>
      <div class="step" id="step-2">
        <span class="step-number">3</span>
        <span class="step-title">Mes infos personnelles</span>
      </div>
    </div>

    <form id="multi-step-form">
      <div id="step-content-0" class="step-content">
        <h4>Mon Project</h4>
        <select class="" name="" id="">
          <option value="">Optionnn</option>
        </select>

        <h4>Je suis</h4>
        <select class="" name="" id="">
          <option value="">Optionnn</option>
        </select>

        <div class="range-container">
          <label for="custom-range1">Montant (en DH)</label>
          <div>
            <input class="range-value" type="number" id="range-value1" value="50000" oninput="updateRangeValue(1)" />
          </div>
          <input type="range" id="custom-range1" min="0" max="1000000" value="50000" oninput="updateInputValue(1)" />
        </div>
        
        <div class="range-container">
          <label for="custom-range2">Durée (en mois)</label>
          <div>
            <input class="range-value" type="number" id="range-value2" value="60" oninput="updateRangeValue(2)" />
          </div>
          <input type="range" id="custom-range2" min="1" max="360" value="60" oninput="updateInputValue(2)" />
        </div>
        
        <div class="range-container">
          <label for="custom-range3">Mensualités (en DH)</label>
          <div>
            <input class="range-value" type="number" id="range-value3" value="1000" oninput="updateRangeValue(3)" />
          </div>
          <input type="range" id="custom-range3" min="0" max="50000" value="1000" oninput="updateInputValue(3)" />
        </div>
        
        <div class="btn">
          <button type="button" class="next-step">Continue</button>
        </div>
      </div>

      <div id="step-content-1" class="step-content">
        <div class="input-container">
          <input type="email" id="email" name="email" required />
          <label for="email">Email*</label>
        </div>

        <div class="input-container">
          <input type="tel" id="phone" name="phone" required />
          <label for="phone">Téléphone mobile*</label>
        </div>
        <div class="btn">
          <button type="button" class="next-step">Continue</button>
        </div>      
      </div>

      <div id="step-content-2" class="step-content">
        <div class="title-selection">
          <p>Civilité</p>
          <div class="radio-group">
            <label class="radio-label">
              <input type="radio" name="title" value="madame" checked />
              <span class="radio-custom"></span>
              Madame
            </label>
            <label class="radio-label">
              <input type="radio" name="title" value="mademoiselle" />
              <span class="radio-custom"></span>
              Mademoiselle
            </label>
            <label class="radio-label">
              <input type="radio" name="title" value="monsieur" />
              <span class="radio-custom"></span>
              Monsieur
            </label>
          </div>
          <div class="input-container" style="margin-top: 20px;">
            <input type="name" id="name" name="name" required />
            <label for="name"> Nome*</label>
          </div>
        </div>
        <div class="input-container">
          <input type="name" id="name" name="name" required />
          <label for="name"> Prenome*</label>
        </div>
        <div class="input-container">
          <input type="text" id="text" name="text" required />
          <label for="text"> Numéro CIN / Carte de séjour*</label>
        </div>
        <div class="input-container">
          <input type="date" id="date" name="date" required />
          <label for="date"> Date de naissance*</label>
        </div>
        <div class="input-container">
          <input type="date" id="date" name="date" required />
          <label for="date"> Date d'embauche/début de l'activité*</label>
        </div>
        <div class="input-container">
          <input type="number" id="number" name="number" required />
          <label for="">  Total revenus mensuels (net en DH)*</label>
        </div>

        <h4>Avez vous des crédits en cours ?</h4>
          <div class="radio-group">
            <label class="radio-label">
              <input type="radio" name="ouiOuNon" value="oui" checked />
              <span class="radio-custom"></span>
              oui
            </label>
            <label class="radio-label">
              <input type="radio" name="ouiOuNon" value="non" />
              <span class="radio-custom"></span>
              non
            </label>
          </div>

          <div class="btn" >
            <button class="next-step" type="submit">Demende ce credit</button>
            <button class="next-step" style="margin-left: 10px;" type="button">Voir mon recapitulatif</button>
          </div>    
      </div>
    </form>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        let currentStep = 0;
        const steps = document.querySelectorAll(".step");
        const stepContents = document.querySelectorAll(".step-content");

        function showStep(step) {
          steps.forEach((s, index) => {
            s.classList.toggle("active", index === step);
          });
          stepContents.forEach((content, index) => {
            content.classList.toggle("active", index === step);
          });
          currentStep = step;
        }

        document.addEventListener("click", function (e) {
          if (e.target.classList.contains("next-step")) {
            if (currentStep < steps.length - 1) {
              showStep(currentStep + 1);
            }
          } else if (e.target.classList.contains("prev-step")) {
            if (currentStep > 0) {
              showStep(currentStep - 1);
            }
          }
        });

        showStep(currentStep);
      });
    
    </script>
    <script>
      const interestRate = 12 / 100; // Fixed annual interest rate of 12%
    
      function updateInputValue(rangeId) {
        const range = document.getElementById(`custom-range${rangeId}`);
        const input = document.getElementById(`range-value${rangeId}`);
        input.value = range.value;
        if (rangeId === 1 || rangeId === 2) {
          calculateMensualites();
        }
      }
    
      function updateRangeValue(rangeId) {
        const input = document.getElementById(`range-value${rangeId}`);
        const range = document.getElementById(`custom-range${rangeId}`);
        range.value = input.value;
        if (rangeId === 1 || rangeId === 2) {
          calculateMensualites();
        }
      }
    
      function updateMensualites() {
        const mensualite = parseFloat(document.getElementById('range-value3').value); // Monthly payment
        const n = parseFloat(document.getElementById('range-value2').value); // Number of months
        const t = interestRate / 12; // Monthly interest rate
    
        if (mensualite > 0 && n > 0) {
          const K = mensualite * (1 - Math.pow(1 + t, -n)) / t;
          document.getElementById('range-value1').value = K.toFixed(2);
          document.getElementById('custom-range1').value = K.toFixed(2);
        }
      }
    
      function calculateMensualites() {
        const K = parseFloat(document.getElementById('range-value1').value); // Capital
        const n = parseFloat(document.getElementById('range-value2').value); // Number of months
        const t = interestRate / 12; // Monthly interest rate
    
        if (K > 0 && n > 0) {
          const mensualite = (K * t) / (1 - Math.pow(1 + t, -n));
          document.getElementById('range-value3').value = mensualite.toFixed(2);
          document.getElementById('custom-range3').value = mensualite.toFixed(2);
        }
      }
    
      // Initial calculation
      calculateMensualites();
    </script>  

</body>
</html>
